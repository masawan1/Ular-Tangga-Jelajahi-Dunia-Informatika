<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ular Tangga: Cara Kerja Komputer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .board-cell {
            aspect-ratio: 1;
            border: 2px solid #374151;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            font-weight: bold;
            font-size: 0.6rem;
        }
        .player {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            left: 2px;
            z-index: 10;
            border: 2px solid white;
        }
        .ladder {
            background: linear-gradient(45deg, #10b981, #059669);
            color: white;
        }
        .snake {
            background: linear-gradient(45deg, #ef4444, #dc2626);
            color: white;
        }
        .dice {
            width: 60px;
            height: 60px;
            border: 3px solid #374151;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }
        .dice:hover:not(.cursor-not-allowed) { /* Modifikasi: Hover hanya jika tidak dinonaktifkan */
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        .question-modal {
            backdrop-filter: blur(4px);
        }
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            border-radius: 12px;
            font-weight: bold;
            font-size: 16px;
            z-index: 100;
            transform: translateX(400px);
            transition: all 0.5s ease;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border: 2px solid;
        }
        .notification.show {
            transform: translateX(0);
        }
        .notification.correct {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border-color: #047857;
        }
        .notification.wrong {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            border-color: #b91c1c;
        }
        .timer-warning {
            animation: pulse 1s infinite;
            color: #ef4444 !important;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .score-card {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 8px;
            border: 2px solid #e5e7eb;
        }
        .score-card.highlight {
            border-color: #3b82f6;
            background-color: #eff6ff;
            box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.1);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-100 to-purple-100 min-h-screen p-4">
    <!-- Login Screen -->
    <div id="loginScreen" class="max-w-md mx-auto">
        <div class="bg-white rounded-xl shadow-lg p-6">
            <div class="text-center mb-6">
                <h1 class="text-3xl font-bold text-gray-800 mb-2">üêç Ular Tangga Informatika ü™ú</h1>
                <p class="text-gray-600">Masuk untuk bermain dan pelajari materi!</p>
            </div>
            
            <div class="space-y-6">
                <!-- Player 1 -->
                <div class="border-2 border-blue-200 rounded-lg p-4">
                    <h3 class="text-lg font-bold text-blue-600 mb-3">Pemain 1</h3>
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Masukkan Nama</label>
                            <input type="text" id="player1Name" placeholder="Nama pemain 1" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Pilih Warna</label>
                            <div class="flex space-x-2">
                                <button class="color-btn-1 w-8 h-8 rounded-full bg-red-500 border-2 border-gray-300" data-color="#ef4444"></button>
                                <button class="color-btn-1 w-8 h-8 rounded-full bg-blue-500 border-2 border-gray-300 ring-4 ring-blue-300" data-color="#3b82f6"></button>
                                <button class="color-btn-1 w-8 h-8 rounded-full bg-green-500 border-2 border-gray-300" data-color="#10b981"></button>
                                <button class="color-btn-1 w-8 h-8 rounded-full bg-yellow-500 border-2 border-gray-300" data-color="#f59e0b"></button>
                                <button class="color-btn-1 w-8 h-8 rounded-full bg-purple-500 border-2 border-gray-300" data-color="#8b5cf6"></button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Player 2 -->
                <div class="border-2 border-green-200 rounded-lg p-4">
                    <h3 class="text-lg font-bold text-green-600 mb-3">Pemain 2</h3>
                    <div class="space-y-3">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Masukkan Nama</label>
                            <input type="text" id="player2Name" placeholder="Nama pemain 2" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Pilih Warna</label>
                            <div class="flex space-x-2">
                                <button class="color-btn-2 w-8 h-8 rounded-full bg-red-500 border-2 border-gray-300 ring-4 ring-green-300" data-color="#ef4444"></button>
                                <button class="color-btn-2 w-8 h-8 rounded-full bg-blue-500 border-2 border-gray-300" data-color="#3b82f6"></button>
                                <button class="color-btn-2 w-8 h-8 rounded-full bg-green-500 border-2 border-gray-300" data-color="#10b981"></button>
                                <button class="color-btn-2 w-8 h-8 rounded-full bg-yellow-500 border-2 border-gray-300" data-color="#f59e0b"></button>
                                <button class="color-btn-2 w-8 h-8 rounded-full bg-purple-500 border-2 border-gray-300" data-color="#8b5cf6"></button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Pilihan Waktu Bermain Baru -->
                <div class="border-2 border-gray-200 rounded-lg p-4 bg-gray-50">
                    <label for="gameDuration" class="block text-lg font-bold text-gray-700 mb-3">Pilih Durasi Permainan</label>
                    <select id="gameDuration" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white">
                        <option value="60">1 Menit (Mode Cepat)</option>
                        <option value="180">3 Menit</option>
                        <option value="300">5 Menit</option>
                        <option value="450">7.5 Menit</option>
                        <option value="600" selected>10 Menit (Bawaan)</option>
                        <option value="900">15 Menit</option>
                    </select>
                </div>
                
                <button id="startGame" class="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors">
                    Mulai Bermain
                </button>
            </div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="hidden max-w-6xl mx-auto">
        <!-- Header -->
        <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-2xl font-bold text-gray-800">üêç Ular Tangga Informatika ü™ú</h1>
                    <p class="text-gray-600">Pelajari materi Warga Digital, Verifikasi, dan Profesi Masa Depan!</p>
                </div>
                <div class="text-right">
                    <div class="text-sm text-gray-600">Giliran:</div>
                    <div id="currentPlayer" class="text-lg font-bold text-blue-600">Player 1</div>
                    <div class="text-sm text-gray-600 mt-2">Waktu tersisa:</div>
                    <div id="gameTimer" class="text-lg font-bold text-green-600">15:00</div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-4">
            <!-- Game Board -->
            <div class="lg:col-span-3">
                <div class="bg-white rounded-xl shadow-lg p-4">
                    <div id="gameBoard" class="grid grid-cols-10 gap-1 max-w-2xl mx-auto"></div>
                </div>
            </div>

            <!-- Game Controls -->
            <div class="space-y-4">
                <!-- Dice -->
                <div class="bg-white rounded-xl shadow-lg p-4">
                    <h3 class="text-lg font-bold mb-4 text-center">Lempar Dadu</h3>
                    <div class="flex justify-center">
                        <div id="dice" class="dice">üé≤</div>
                    </div>
                    <div id="diceResult" class="text-center mt-2 font-bold text-lg"></div>
                </div>

                <!-- Player Status -->
                <div class="bg-white rounded-xl shadow-lg p-4">
                    <h3 class="text-lg font-bold mb-4">Status Pemain</h3>
                    <div id="playerStatus" class="space-y-2"></div>
                </div>

                <!-- Game Rules -->
                <div class="bg-white rounded-xl shadow-lg p-4">
                    <h3 class="text-lg font-bold mb-2">Aturan Permainan</h3>
                    <ul class="text-sm text-gray-600 space-y-1">
                        <li>ü™ú Tangga hijau = naik ke atas</li>
                        <li>üêç Ular merah = turun ke bawah</li>
                        <li>‚ùì Kotak khusus = jawab pertanyaan</li>
                        <li>‚úÖ Jawaban benar = +10 poin</li>
                        <li>‚ùå Jawaban salah = -2 poin</li>
                        <li>üèÜ Capai kotak 100 = +50 poin bonus!</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Question Modal -->
    <div id="questionModal" class="hidden fixed inset-0 bg-black bg-opacity-50 question-modal z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-6">
            <div class="text-center mb-4">
                <h3 class="text-xl font-bold text-gray-800">Pertanyaan Informatika</h3>
            </div>
            
            <div id="questionContent" class="mb-6">
                <p id="questionText" class="text-gray-700 mb-4"></p>
                <div id="questionOptions" class="space-y-2"></div>
            </div>
            
            <div class="text-center">
                <button id="submitAnswer" class="bg-blue-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-blue-700 transition-colors">
                    Jawab
                </button>
            </div>
        </div>
    </div>

    <!-- Win Modal (Updated to show Nilai Akhir for both players) -->
    <div id="winModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-lg w-full p-6 text-center">
            <div class="text-6xl mb-4">üèÜ</div>
            <h3 id="winModalTitle" class="text-2xl font-bold text-gray-800 mb-4">Permainan Selesai!</h3>
            <p id="winnerText" class="text-gray-600 mb-6"></p> <!-- Digunakan untuk pesan utama (menang/waktu habis) -->

            <div id="finalScores" class="space-y-3 mb-6">
                <!-- Data skor pemain akan dimasukkan di sini -->
            </div>

            <button id="playAgain" class="bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors">
                Main Lagi
            </button>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <script>
        // Game state
        let gameState = {
            players: [],
            currentPlayerIndex: 0,
            gameStarted: false,
            gameTimer: null,
            gameTimeLeft: 600, // 10 minutes in seconds (Default value)
            currentQuestionIndex: 0,
            currentQuestion: null
        };

        // Game board configuration
        const ladders = {
            4: 14, 9: 31, 17: 37, 20: 38, 28: 84, 40: 59, 51: 67, 63: 81, 71: 91
        };

        const snakes = {
            16: 6, 47: 26, 49: 11, 56: 53, 62: 19, 64: 60, 87: 24, 93: 73, 95: 75, 98: 78
        };

        const questionSquares = [8, 15, 22, 29, 36, 43, 50, 57, 64, 71, 78, 85, 92];

        // Computer science questions (UPDATED: Total 50 questions based on "Jelajahi Dunia Informatika.pdf")
        const questions = [
            // Topik 1: Informatika & Profesi Masa Depan (10 Soal)
            {
                question: "Menurut grafik 'Permintaan Talenta Digital', bidang profesi apa yang memiliki persentase Proyeksi (biru) paling tinggi?",
                options: ["Programmer/Pengembang Perangkat Lunak", "Pengolah Data", "Spesialis Jaringan", "Analisis Data"],
                correct: 3 
            },
            {
                question: "Profesi yang sangat terdampak dan terus didorong pesat oleh Artificial Intelligence (AI) menurut materi adalah...",
                options: ["Pengembang Web", "Pekerja Pabrik Tradisional", "Profesi yang Bertiagal", "Guru Sejarah"],
                correct: 2 
            },
            {
                question: "Menurut materi, Informatika bukan hanya tentang 'coding', tetapi juga tentang bagaimana domain menggiatkan...?",
                options: ["Pengolahan data", "Teknologi digital", "Tanding", "Perangkat keras"],
                correct: 2 
            },
            {
                question: "Apa tujuan dari 'Panduan Keterampilan Digital Esensial' ini, seperti yang disebutkan di awal materi?",
                options: ["Membantu Siswa Kelas XII SMA", "Membimbing dalam menjadi Talenta Digital Masa Depan", "Mempelajari Bahasa Pemrograman", "Meningkatkan Kecepatan Koneksi"],
                correct: 1
            },
            {
                question: "Berdasarkan grafik, bidang 'Programmer/Pengembang Perangkat Lunak' memiliki Proyeksi sekitar...",
                options: ["7%", "8%", "9%", "10%"],
                correct: 1
            },
            {
                question: "Permintaan Talenta Digital Saat Ini (hijau) paling tinggi terdapat pada bidang profesi apa?",
                options: ["Analisis Data", "Insinyur Kecerdasan Buatan", "Pengolah Data", "Manajer Teknologi"],
                correct: 0 
            },
            {
                question: "Profesi yang paling mungkin digantikan secara cepat oleh sistem otomatisasi adalah profesi yang bersifat...",
                options: ["Kreatif dan Strategis", "Bertiagal dan Rutin", "Kompleks dan Inovatif", "Edukasi dan Pelatihan"],
                correct: 1 
            },
            {
                question: "Peningkatan permintaan talenta digital terjadi seiring dengan percepatan perkembangan teknologi, terutama...",
                options: ["Komunikasi Satelit", "Artificial Intelligence (AI)", "Fisika Kuantum", "Industri Kerajinan"],
                correct: 1
            },
            {
                question: "Bidang profesi yang memiliki selisih persentase terbesar antara Permintaan Saat Ini dan Proyeksi adalah...",
                options: ["Spesialis Jaringan", "Pengolah Data", "Programmer", "Insinyur AI"],
                correct: 3 
            },
            {
                question: "Apa kunci untuk menghadapi pergeseran profesi masa depan yang didorong oleh AI?",
                options: ["Menghindari teknologi baru", "Menguasai keterampilan digital esensial", "Hanya belajar coding", "Mengandalkan pekerjaan fisik saja"],
                correct: 1 
            },
            // Topik 2: Warga Digital Cerdas & Bertanggung Jawab (10 Soal)
            {
                question: "Istilah dalam Glosarium yang merujuk pada 'Aksi atau aturan perilaku yang baik dalam dunia maya' adalah...",
                options: ["Membaca Lateral", "Ekosistem Periksa Fakta", "Etika Digital", "Hoaks"],
                correct: 2 
            },
            {
                question: "Manakah yang BUKAN salah satu dari '3 Pertanyaan Kritis Sebelum Berbagi' informasi?",
                options: ["Apakah didukung fakta?", "Apa tujuannya?", "Berapa banyak yang melihatnya?", "Siapa pembuatnya?"],
                correct: 2 
            },
            {
                question: "Pertanyaan kritis 'Apakah didukung fakta?' bertujuan untuk mengecek...",
                options: ["Kualitas gambar", "Kebenaran data dan bukti", "Niat pembuat konten", "Jumlah pengikut"],
                correct: 1 
            },
            {
                question: "Apa definisi 'Hoaks' menurut Glosarium?",
                options: ["Berita benar yang viral", "Berita atau informasi palsu yang dimuat seolah-olah benar", "Konten video lucu", "Pencarian kata kunci"],
                correct: 1 
            },
            {
                question: "Yang dimaksud dengan 'Jebakan Informasi' yang harus diwaspadai adalah informasi yang bersifat...",
                options: ["Netral dan objektif", "Membuat marah dan memancing emosi", "Resmi dari pemerintah", "Berbentuk .pdf"],
                correct: 1 
            },
            {
                question: "Jika tujuan pembuat informasi adalah untuk 'memecah belah' atau 'memancing keributan', ini berkaitan dengan pertanyaan kritis...",
                options: ["Siapa pembuatnya?", "Apa tujuannya?", "Apakah didukung fakta?", "Kapan dibuat?"],
                correct: 1 
            },
            {
                question: "Mengapa penting untuk mengetahui 'Siapa pembuatnya' sebelum berbagi informasi?",
                options: ["Untuk mengetahui alamat rumahnya", "Untuk menilai kredibilitas dan keahliannya", "Untuk mengajaknya berdiskusi", "Untuk melihat foto profilnya"],
                correct: 1
            },
            {
                question: "Perilaku berbagi informasi palsu (hoaks) secara sadar dan sengaja melanggar prinsip...",
                options: ["Membaca Lateral", "Karya Intelektual", "Etika Digital", "Pencarian Tepat"],
                correct: 2 
            },
            {
                question: "Menggunakan kata-kata kasar atau menghina orang lain di media sosial merupakan contoh pelanggaran terhadap...",
                options: ["Karya Intelektual", "Membaca Lateral", "Etika Digital", "Pencarian Tepat"],
                correct: 2
            },
            {
                question: "Sebagai Warga Digital, kita harus cerdas dan bertanggung jawab, terutama dalam hal...",
                options: ["Mengakses situs web manapun", "Mengabaikan sumber informasi", "Memverifikasi dan memproses informasi yang diterima", "Berbagi tanpa berpikir panjang"],
                correct: 2
            },
            // Topik 3: Menguasai Alat Digital Sehari-hari (10 Soal)
            {
                question: "Untuk membatasi hasil pencarian hanya pada domain tertentu (misal: hanya di situs 'kemdikbud.go.id'), Jurus Jitu Pencarian Google apa yang digunakan?",
                options: ["Eliminasi Kata", "Pencarian Tepat", "Jenis File", "Spesifik Situs"],
                correct: 3 
            },
            {
                question: "Teknik dalam Pencarian Google yang bertujuan untuk mencari file berdasarkan formatnya (misal: .pdf atau .docx) adalah...",
                options: ["Pencarian Tepat", "Jenis File", "Eliminasi Kata", "Konfirmasi Sumber"],
                correct: 1 
            },
            {
                question: "Apa manfaat dari menguasai 'Jurus Jitu Pencarian Google' seperti yang disebutkan dalam materi?",
                options: ["Mempercepat koneksi internet", "Membuat pekerjaan marjad lebih mudah/baik", "Menghapus iklan pop-up", "Mendapatkan jawaban langsung"],
                correct: 1
            },
            {
                question: "Jurus 'Eliminaal Kata' dalam Pencarian Google berfungsi untuk...",
                options: ["Mencari frase yang persis sama", "Mengabaikan kata-kata tertentu dari hasil", "Mencari di situs spesifik", "Mencari dokumen bertipe tertentu"],
                correct: 1 
            },
            {
                question: "Jurus Pencarian Google yang menggunakan tanda kutip (\") untuk mencari frasa yang persis sama adalah...",
                options: ["Eliminasi Kata", "Jenis File", "Pencarian Tepat", "Spesifik Situs"],
                correct: 2 
            },
            {
                question: "Jika Anda ingin mencari 'resep ayam' tetapi tidak ingin melihat hasil tentang 'goreng', jurus apa yang Anda gunakan?",
                options: ["Pencarian Tepat", "Jenis File", "Eliminasi Kata", "Spesifik Situs"],
                correct: 2 
            },
            {
                question: "Apa yang dimaksud dengan 'Alat Digital Sehari-hari' dalam konteks materi ini?",
                options: ["Hanya smartphone", "Hanya komputer", "Perangkat lunak dan perangkat keras yang digunakan untuk kegiatan harian", "Semua perangkat elektronik di rumah"],
                correct: 2 
            },
            {
                question: "Teknik pencarian yang bertujuan mendapatkan pekerjaan 'marjad lebih' (menjadi lebih baik/efisien) dapat dilakukan dengan menguasai...",
                options: ["Jurus Jitu Pencarian Google", "Manajemen Berkas", "Sistem Operasi", "Membaca Cepat"],
                correct: 0
            },
            {
                question: "Untuk mencari informasi tentang 'Virus Corona' tetapi mengecualikan kata 'vaksin', sintaks pencarian yang tepat adalah...",
                options: ["'Virus Corona' vaksin", "Virus Corona filetype:pdf", "Virus Corona -vaksin", "Virus Corona site:wikipedia.org"],
                correct: 2 
            },
            {
                question: "Jurus Pencarian Google mana yang paling efektif untuk penelitian akademis yang membutuhkan dokumen resmi?",
                options: ["Pencarian Tepat", "Eliminasi Kata", "Jenis File", "Spesifik Situs"],
                correct: 2 // Jenis File (misal: filetype:pdf)
            },
            // Topik 4: Teknik Verifikasi Terbaik - Membaca Lateral (10 Soal)
            {
                question: "Apa nama teknik verifikasi terbaik yang melibatkan 'membuka tab baru dan mencari tahu tentang website atau topik dari berbagai sumber lain'?",
                options: ["Membaca Cepat", "Membaca Intensif", "Membaca Lateral", "Membaca Ekstensif"],
                correct: 2 
            },
            {
                question: "Setelah 'Temukan Informasi' dalam langkah Membaca Lateral, langkah apa yang HARUS segera dilakukan?",
                options: ["Bagikan ke teman", "Jangan Langsung Baca, Buka Tab Baru", "Buat Keputusan", "Selidiki Sumbernya"],
                correct: 1 
            },
            {
                question: "Manakah langkah ketiga dalam Teknik Membaca Lateral?",
                options: ["Temukan Informasi", "Cari Konfirmasi dari Sumber Lain", "Selidiki Sumbernya", "Buat Keputusan"],
                correct: 2 
            },
            {
                question: "Langkah terakhir dalam Teknik Membaca Lateral adalah...",
                options: ["Cari Konfirmasi", "Selidiki Sumber", "Buat Keputusan", "Temukan Informasi"],
                correct: 2 
            },
            {
                question: "Pada langkah 'Selidiki Sumbernya', hal penting apa yang perlu dicari tahu?",
                options: ["Apakah ada foto yang menarik", "Siapa penulis atau pembuat konten tersebut", "Berapa lama waktu yang dibutuhkan untuk membaca", "Apakah warna tulisannya bagus"],
                correct: 1 
            },
            {
                question: "Tujuan dari langkah 'Cari Konfirmasi dari Sumber Lain' adalah...",
                options: ["Membandingkan tanggal terbit", "Mengetahui pendapat pribadi", "Mencari sumber tepercaya yang memverifikasi kebenaran informasi", "Mencari kritik dari sumber lain"],
                correct: 2 
            },
            {
                question: "Mengapa disarankan untuk 'Jangan Langsung Baca, Buka Tab Baru'?",
                options: ["Agar dapat beristirahat sejenak", "Untuk mencari sumber tepercaya dan menghindari informasi bias", "Untuk menghemat kuota internet", "Karena informasi di halaman itu pasti salah"],
                correct: 1 
            },
            {
                question: "Apa yang harus dilakukan setelah membandingkan informasi dari berbagai sumber (Langkah 4: Cari Konfirmasi)?",
                options: ["Memulai pencarian baru", "Buat Keputusan", "Menutup semua tab", "Mengirim email ke penulis"],
                correct: 1 
            },
            {
                question: "Teknik Membaca Lateral sangat penting untuk memverifikasi kebenaran informasi di dunia...",
                options: ["Perpustakaan", "Fisik (surat kabar cetak)", "Digital", "Sejarah Kuno"],
                correct: 2 
            },
            {
                question: "Jika suatu sumber terkesan memihak ('bias') dalam langkah 'Selidiki Sumbernya', tindakan terbaik selanjutnya adalah...",
                options: ["Mengabaikannya", "Langsung memercayainya", "Mencari konfirmasi dari sumber lain yang netral", "Berdebat di kolom komentar"],
                correct: 2
            },
            // Pertanyaan Varian Tambahan / Glosarium (10 Soal)
            {
                question: "Panduan ini ditujukan sebagai 'Panduan Keterampilan Digital Esensial' untuk Siswa Kelas...",
                options: ["VII SMP", "IX SMP", "X SMK", "XII SMA"],
                correct: 2 
            },
            {
                question: "Menurut Glosarium, apa yang dimaksud dengan 'Karya Intelektual'?",
                options: ["Berita Hoaks", "Hak cipta yang diberikan saputih pelicita karthik", "Ekosistem Periksa Fakta", "Etika Digital"],
                correct: 1
            },
            {
                question: "Tiga pertanyaan kritis sebelum berbagi informasi adalah 'Siapa pembuatnya?', 'Apa tujuannya?', dan...",
                options: ["Kapan diposting?", "Apakah didukung fakta?", "Seberapa populer?", "Berapa banyak yang harus saya bagikan?"],
                correct: 1 
            },
            {
                question: "Teknik verifikasi yang paling efektif untuk menyaring sumber informasi di dunia digital adalah...",
                options: ["Membaca cepat", "Membaca diagonal", "Membaca Lateral", "Membaca Ekstensif"],
                correct: 2 
            },
            {
                question: "Pada grafik 'Permintaan Talenta Digital', bidang 'Programmer/Pengembang Perangkat Lunak' memiliki persentase Permintaan Saat Ini (hijau) sekitar...",
                options: ["6%", "7%", "8%", "9%"],
                correct: 1 
            },
            {
                question: "Apa yang merupakan contoh dari 'Ekosistem Periksa Fakta'?",
                options: ["Jaringan media sosial", "Platform yang menyediakan verifikasi kebenaran informasi", "Perusahaan teknologi raksasa", "Sekolah Menengah Kejuruan (SMK)"],
                correct: 1
            },
            {
                question: "Menurut Glosarium, 'Mak yang diberikan saputih pelicita karthik' adalah definisi dari...",
                options: ["Hoaks", "Etika Digital", "Karya Intelektual", "Membaca Lateral"],
                correct: 2 
            },
            {
                question: "Menurut Glosarium, apa yang dimaksud dengan 'Hoaks'?",
                options: ["Berita faktual", "Informasi palsu yang dimuat seolah-olah benar", "Berita yang diumumkan di media massa", "Panduan keterampilan digital"],
                correct: 1 
            },
            {
                question: "Perangkat lunak yang digunakan untuk mengimplementasikan perangkat lunak, seperti yang disinggung di Glosarium, adalah definisi dari...",
                options: ["Perangkat Keras", "Etika Digital", "Alat Digital", "Basis Data"],
                correct: 2 // Merujuk pada Alat Digital
            },
            {
                question: "Mengapa keterampilan Membaca Lateral penting untuk dimiliki di era digital?",
                options: ["Untuk mempercepat koneksi internet", "Untuk menghindari jebakan informasi dan memverifikasi kebenaran", "Untuk menemukan lebih banyak teman", "Untuk menjadi programmer yang sukses"],
                correct: 1 
            }
        ];
        
        // Konstanta untuk perhitungan skor (diperbarui sesuai 50 soal)
        // 50 kotak pertanyaan * 10 poin + 50 bonus menang = 550 Poin
        const MAX_RAW_SCORE = 550; 

        // Initialize login screen
        function initLogin() {
            let selectedColor1 = '#3b82f6';
            let selectedColor2 = '#ef4444';
            
            // Player 1 color selection
            document.querySelectorAll('.color-btn-1').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.color-btn-1').forEach(b => b.classList.remove('ring-4', 'ring-blue-300'));
                    btn.classList.add('ring-4', 'ring-blue-300');
                    selectedColor1 = btn.dataset.color;
                });
            });

            // Player 2 color selection
            document.querySelectorAll('.color-btn-2').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.color-btn-2').forEach(b => b.classList.remove('ring-4', 'ring-green-300'));
                    btn.classList.add('ring-4', 'ring-green-300');
                    selectedColor2 = btn.dataset.color;
                });
            });

            document.getElementById('startGame').addEventListener('click', () => {
                const player1NameInput = document.getElementById('player1Name');
                const player2NameInput = document.getElementById('player2Name');

                player1NameInput.classList.remove('border-red-500', 'border-4');
                player2NameInput.classList.remove('border-red-500', 'border-4');

                const player1Name = player1NameInput.value.trim();
                const player2Name = player2NameInput.value.trim();
                
                let hasError = false;

                if (!player1Name) {
                    showNotification('Masukkan nama untuk Pemain 1!', 'wrong');
                    player1NameInput.classList.add('border-red-500', 'border-4');
                    hasError = true;
                }

                if (!player2Name) {
                    showNotification('Masukkan nama untuk Pemain 2!', 'wrong');
                    player2NameInput.classList.add('border-red-500', 'border-4');
                    hasError = true;
                }

                if (hasError) return;


                if (player1Name === player2Name) {
                    showNotification('Nama pemain harus berbeda!', 'wrong');
                    player1NameInput.classList.add('border-red-500', 'border-4');
                    player2NameInput.classList.add('border-red-500', 'border-4');
                    return;
                }

                if (selectedColor1 === selectedColor2) {
                    showNotification('Warna pemain harus berbeda!', 'wrong');
                    return;
                }
                
                // Ambil durasi waktu yang dipilih dan update gameState
                const durationElement = document.getElementById('gameDuration');
                gameState.gameTimeLeft = parseInt(durationElement.value);

                gameState.players = [
                    {
                        name: player1Name,
                        position: 0,
                        color: selectedColor1,
                        points: 0
                    },
                    {
                        name: player2Name,
                        position: 0,
                        color: selectedColor2,
                        points: 0
                    }
                ];

                document.getElementById('loginScreen').classList.add('hidden');
                document.getElementById('gameScreen').classList.remove('hidden');
                initGame();
            });
        }

        // Initialize game
        function initGame() {
            createBoard();
            updatePlayerStatus();
            updateCurrentPlayer();
            startGameTimer();
            
            // Update initial timer display based on selected duration
            const initialMinutes = Math.floor(gameState.gameTimeLeft / 60);
            const initialSeconds = gameState.gameTimeLeft % 60;
            document.getElementById('gameTimer').textContent = `${initialMinutes}:${initialSeconds.toString().padStart(2, '0')}`;


            document.getElementById('dice').addEventListener('click', rollDice);
            document.getElementById('submitAnswer').addEventListener('click', submitAnswer);
            document.getElementById('playAgain').addEventListener('click', resetGame);
        }

        // Start game timer
        function startGameTimer() {
            const timerElement = document.getElementById('gameTimer');
            
            gameState.gameTimer = setInterval(() => {
                gameState.gameTimeLeft--;
                
                const minutes = Math.floor(gameState.gameTimeLeft / 60);
                const seconds = gameState.gameTimeLeft % 60;
                const timeString = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                timerElement.textContent = timeString;
                
                // Warning when 3 minutes left
                if (gameState.gameTimeLeft <= 180) {
                    timerElement.classList.add('timer-warning');
                }
                
                // Time's up
                if (gameState.gameTimeLeft <= 0) {
                    clearInterval(gameState.gameTimer);
                    gameState.gameTimer = null;
                    endGameByTime();
                }
            }, 1000);
        }

        // End game when time runs out (Updated to show final score)
        function endGameByTime() {
            // Find winner by highest points, or highest position if points are tied
            let winner = gameState.players[0];
            for (let i = 1; i < gameState.players.length; i++) {
                const player = gameState.players[i];
                if (player.points > winner.points || 
                    (player.points === winner.points && player.position > winner.position)) {
                    winner = player;
                }
            }
            
            showNotification('Waktu habis! Permainan selesai!', 'wrong');
            setTimeout(() => {
                // Panggil showWinModal dengan flag timeOver = true
                showWinModal(winner.name, winner.points, true);
            }, 2000);
        }

        // Create game board
        function createBoard() {
            const board = document.getElementById('gameBoard');
            board.innerHTML = '';

            for (let i = 100; i >= 1; i--) {
                const cell = document.createElement('div');
                cell.className = 'board-cell bg-gray-50';
                cell.id = `cell-${i}`;
                
                // Calculate position for snake pattern
                const row = Math.floor((100 - i) / 10);
                const col = (row % 2 === 0) ? (i - 1) % 10 : 9 - ((i - 1) % 10);
                
                // Add special styling
                if (ladders[i]) {
                    cell.classList.add('ladder');
                    cell.innerHTML = `${i}<br>ü™ú`;
                } else if (snakes[i]) {
                    cell.classList.add('snake');
                    cell.innerHTML = `${i}<br>üêç`;
                } else if (questionSquares.includes(i)) {
                    cell.classList.add('bg-yellow-200');
                    cell.innerHTML = `${i}<br>‚ùì`;
                } else if (i === 100) {
                    cell.classList.add('bg-gold-200');
                    cell.innerHTML = `${i}<br>üèÜ`;
                } else {
                    cell.innerHTML = i;
                }

                board.appendChild(cell);
            }
        }

        // Roll dice
        function rollDice() {
            const dice = document.getElementById('dice');
            const result = Math.floor(Math.random() * 6) + 1;
            
            dice.style.transform = 'rotate(360deg)';
            setTimeout(() => {
                dice.style.transform = 'rotate(0deg)';
                dice.textContent = result;
                document.getElementById('diceResult').textContent = `Hasil: ${result}`;
                
                movePlayer(result);
            }, 300);
        }

        // Move player
        function movePlayer(steps) {
            const player = gameState.players[gameState.currentPlayerIndex];
            const oldPosition = player.position;
            let newPosition = oldPosition + steps;

            if (newPosition > 100) {
                newPosition = 100 - (newPosition - 100);
            }

            // Remove current player from old position
            if (oldPosition > 0) {
                const oldCell = document.getElementById(`cell-${oldPosition}`);
                const oldPlayer = oldCell.querySelector(`.player[data-player="${gameState.currentPlayerIndex}"]`);
                if (oldPlayer) oldPlayer.remove();
            }

            player.position = newPosition;

            // Add player to new position
            const newCell = document.getElementById(`cell-${newPosition}`);
            const playerElement = document.createElement('div');
            playerElement.className = 'player';
            playerElement.style.backgroundColor = player.color;
            playerElement.dataset.player = gameState.currentPlayerIndex;
            
            // Position multiple players in the same cell
            const existingPlayers = newCell.querySelectorAll('.player');
            if (existingPlayers.length > 0) {
                playerElement.style.top = '2px';
                playerElement.style.left = `${22 + (existingPlayers.length * 12)}px`;
            }
            
            newCell.appendChild(playerElement);

            // Check for special squares
            setTimeout(() => {
                if (newPosition === 100) {
                    player.points += 50;
                    updatePlayerStatus();
                    if (gameState.gameTimer) {
                        clearInterval(gameState.gameTimer);
                        gameState.gameTimer = null;
                    }
                    // Panggil showWinModal untuk menang mencapai 100
                    showWinModal(player.name, player.points);
                    return;
                }

                if (ladders[newPosition]) {
                    showNotification(`${player.name} naik tangga! ${newPosition} ‚Üí ${ladders[newPosition]}`, 'correct');
                    setTimeout(() => {
                        movePlayerTo(ladders[newPosition]);
                    }, 1000);
                } else if (snakes[newPosition]) {
                    showNotification(`${player.name} kena ular! ${newPosition} ‚Üí ${snakes[newPosition]}`, 'wrong');
                    setTimeout(() => {
                        movePlayerTo(snakes[newPosition]);
                    }, 1000);
                } else if (questionSquares.includes(newPosition)) {
                    showQuestion();
                } else {
                    nextTurn();
                }
            }, 500);

            updatePlayerStatus();
        }

        // Move player to specific position
        function movePlayerTo(position) {
            const player = gameState.players[gameState.currentPlayerIndex];
            const oldCell = document.getElementById(`cell-${player.position}`);
            const oldPlayer = oldCell.querySelector(`.player[data-player="${gameState.currentPlayerIndex}"]`);
            if (oldPlayer) oldPlayer.remove();

            player.position = position;

            const newCell = document.getElementById(`cell-${position}`);
            const playerElement = document.createElement('div');
            playerElement.className = 'player';
            playerElement.style.backgroundColor = player.color;
            playerElement.dataset.player = gameState.currentPlayerIndex;
            
            // Position multiple players in the same cell
            const existingPlayers = newCell.querySelectorAll('.player');
            if (existingPlayers.length > 0) {
                playerElement.style.top = '2px';
                playerElement.style.left = `${22 + (existingPlayers.length * 12)}px`;
            }
            
            newCell.appendChild(playerElement);

            updatePlayerStatus();
            
            if (position === 100) {
                player.points += 50;
                updatePlayerStatus();
                if (gameState.gameTimer) {
                    clearInterval(gameState.gameTimer);
                    gameState.gameTimer = null;
                }
                // Panggil showWinModal untuk menang mencapai 100
                showWinModal(player.name, player.points);
            } else {
                nextTurn();
            }
        }

        // Show question modal
        function showQuestion() {
            // Show questions in order, reset to 0 when all questions are used
            if (gameState.currentQuestionIndex >= questions.length) {
                gameState.currentQuestionIndex = 0;
            }
            
            const question = questions[gameState.currentQuestionIndex];
            gameState.currentQuestionIndex++;
            
            document.getElementById('questionText').textContent = question.question;
            
            const optionsContainer = document.getElementById('questionOptions');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'w-full text-left p-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors';
                button.textContent = `${String.fromCharCode(65 + index)}. ${option}`;
                button.dataset.index = index;
                button.addEventListener('click', () => {
                    document.querySelectorAll('#questionOptions button').forEach(b => b.classList.remove('bg-blue-100', 'border-blue-500'));
                    button.classList.add('bg-blue-100', 'border-blue-500');
                });
                optionsContainer.appendChild(button);
            });

            // LOGIKA: Menonaktifkan tombol dadu saat modal pertanyaan muncul
            const diceElement = document.getElementById('dice');
            diceElement.style.pointerEvents = 'none';
            diceElement.classList.add('opacity-50', 'cursor-not-allowed');

            document.getElementById('questionModal').classList.remove('hidden');
            gameState.currentQuestion = question; // Simpan objek pertanyaan ke game state
        }

        // Submit answer
        function submitAnswer() {
            // PERBAIKAN: Cek apakah currentQuestion ada sebelum mencoba mengakses propertinya
            if (!gameState.currentQuestion) {
                console.error("Kesalahan: Tidak ada pertanyaan aktif saat submitAnswer dipanggil.");
                document.getElementById('questionModal').classList.add('hidden');
                nextTurn(); // Lanjut ke giliran berikutnya jika ada error
                return;
            }

            const selectedButton = document.querySelector('#questionOptions button.bg-blue-100');
            const selectedIndex = selectedButton ? parseInt(selectedButton.dataset.index) : -1;
            
            if (selectedIndex === -1) {
                showNotification('Pilih jawaban terlebih dahulu!', 'wrong');
                return;
            }

            const diceElement = document.getElementById('dice');
            
            const correct = selectedIndex === gameState.currentQuestion.correct;
            
            document.getElementById('questionModal').classList.add('hidden');
            
            // LOGIKA: Mengaktifkan kembali tombol dadu setelah menjawab
            diceElement.style.pointerEvents = 'auto';
            diceElement.classList.remove('opacity-50', 'cursor-not-allowed');
            
            // Set currentQuestion kembali ke null setelah selesai
            gameState.currentQuestion = null; 

            if (correct) {
                const player = gameState.players[gameState.currentPlayerIndex];
                player.points += 10;
                showNotification(`Jawaban benar! ${player.name} dapat +10 poin! Lempar dadu lagi!`, 'correct');
                updatePlayerStatus();
                return; // Don't change turn, player rolls again
            } else {
                const player = gameState.players[gameState.currentPlayerIndex];
                player.points = Math.max(0, player.points - 2);
                showNotification(`Jawaban salah! ${player.name} dikurangi -2 poin. Giliran selanjutnya.`, 'wrong');
                updatePlayerStatus();
            }
            
            nextTurn();
        }

        // Next turn
        function nextTurn() {
            gameState.currentPlayerIndex = (gameState.currentPlayerIndex + 1) % gameState.players.length;
            updateCurrentPlayer();
        }

        // Update current player display
        function updateCurrentPlayer() {
            const player = gameState.players[gameState.currentPlayerIndex];
            document.getElementById('currentPlayer').textContent = player.name;
        }

        // Update player status
        function updatePlayerStatus() {
            const statusContainer = document.getElementById('playerStatus');
            statusContainer.innerHTML = '';
            
            gameState.players.forEach((player, index) => {
                const playerDiv = document.createElement('div');
                playerDiv.className = `flex items-center justify-between p-2 rounded-lg ${index === gameState.currentPlayerIndex ? 'bg-blue-100' : 'bg-gray-50'}`;
                
                playerDiv.innerHTML = `
                    <div class="flex items-center space-x-2">
                        <div class="w-4 h-4 rounded-full" style="background-color: ${player.color}"></div>
                        <span class="font-medium">${player.name}</span>
                    </div>
                    <div class="text-right">
                        <div class="text-sm font-bold">Kotak ${player.position}</div>
                        <div class="text-xs text-gray-500">Poin: ${player.points}</div>
                    </div>
                `;
                
                statusContainer.appendChild(playerDiv);
            });
        }

        // Show notification
        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Helper function to calculate final score (UPDATED: Min score 10, Max score 100)
        function calculateFinalScore(rawPoints) {
            // Konstanta
            const MAX_RAW_SCORE = 550; // 50 questions * 10 points + 50 bonus = 550
            const MIN_FINAL_SCORE = 10;
            const MAX_FINAL_SCORE = 100;
            const RANGE_FINAL_SCORE = MAX_FINAL_SCORE - MIN_FINAL_SCORE; // 90

            // Pastikan rawPoints tidak negatif
            const actualRawPoints = Math.max(0, rawPoints);
            
            // Rumus Scaling Baru: Score = Min + (Raw / Max_Raw) * Range_Final
            // Ini akan menskala 0 hingga 550 ke 10 hingga 100
            let finalScore = MIN_FINAL_SCORE + (actualRawPoints / MAX_RAW_SCORE) * RANGE_FINAL_SCORE;

            // Batasi nilai maksimum di 100 dan bulatkan ke atas
            finalScore = Math.min(MAX_FINAL_SCORE, Math.ceil(finalScore));

            return finalScore;
        }

        // Show win modal (UPDATED: Display both players' final scores)
        function showWinModal(winningPlayerName, winningPlayerPoints, timeOver = false) {
            const winModalTitle = document.getElementById('winModalTitle');
            const winnerText = document.getElementById('winnerText');
            const finalScoresContainer = document.getElementById('finalScores');

            winModalTitle.textContent = "Permainan Selesai!";
            
            let message = '';
            if (timeOver) {
                message = `${winningPlayerName} adalah pemain dengan poin tertinggi. Waktu permainan sudah habis.`;
            } else {
                message = `${winningPlayerName} berhasil mencapai kotak 100!`;
            }
            
            winnerText.textContent = message;

            // Sort players by points (descending) for display
            const sortedPlayers = [...gameState.players].sort((a, b) => {
                if (b.points !== a.points) {
                    return b.points - a.points; // Sort by points
                }
                return b.position - a.position; // Tie-breaker: sort by position
            });

            finalScoresContainer.innerHTML = ''; // Clear previous scores

            sortedPlayers.forEach(player => {
                const finalScore = calculateFinalScore(player.points);
                const isWinner = player.name === winningPlayerName && sortedPlayers[0].points === player.points; // Highlight highest score

                const scoreCard = document.createElement('div');
                scoreCard.className = `score-card ${isWinner ? 'highlight' : ''}`;
                
                scoreCard.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <div class="w-5 h-5 rounded-full" style="background-color: ${player.color}; border: 2px solid white;"></div>
                        <span class="font-bold text-gray-800">${player.name} ${isWinner ? ' (Juara)' : ''}</span>
                    </div>
                    <div class="text-right">
                        <div class="text-xl font-extrabold text-blue-600">${finalScore}</div>
                        <div class="text-xs text-gray-500">(Poin Mentah: ${player.points})</div>
                    </div>
                `;
                finalScoresContainer.appendChild(scoreCard);
            });
            
            document.getElementById('winModal').classList.remove('hidden');
        }

        // Reset game
        function resetGame() {
            document.getElementById('winModal').classList.add('hidden');
            document.getElementById('gameScreen').classList.add('hidden');
            document.getElementById('loginScreen').classList.remove('hidden');
            
            if (gameState.gameTimer) {
                clearInterval(gameState.gameTimer);
            }
            
            // Reset state
            gameState = {
                players: [],
                currentPlayerIndex: 0,
                gameStarted: false,
                gameTimer: null,
                gameTimeLeft: 600, // Reset ke default 10 menit (600 detik)
                currentQuestionIndex: 0,
                currentQuestion: null
            };
            
            document.getElementById('player1Name').value = '';
            document.getElementById('player2Name').value = '';
            document.querySelectorAll('.color-btn-1').forEach(b => b.classList.remove('ring-4', 'ring-blue-300'));
            document.querySelectorAll('.color-btn-2').forEach(b => b.classList.remove('ring-4', 'ring-green-300'));
            
            // Reset default selections
            document.querySelector('.color-btn-1[data-color="#3b82f6"]').classList.add('ring-4', 'ring-blue-300');
            document.querySelector('.color-btn-2[data-color="#ef4444"]').classList.add('ring-4', 'ring-green-300');

            // Reset dropdown to default 10 minutes
            document.getElementById('gameDuration').value = '600'; 
        }

        // Initialize the game
        initLogin();
    </script>
</body>
</html>
