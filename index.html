<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Multiplayer</title>
    <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            height: 100%;
            overflow: hidden;
        }

        .game-container {
            max-width: 100%;
            margin: 0 auto;
            padding: 0 10px;
        }

        h1 {
            margin: 0 0 20px 0;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .controls-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-size: 1.1rem;
        }

        .player-info {
            background: rgba(255,255,255,0.1);
            padding: 10px 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .player1 { border-left: 4px solid #ff6b6b; }
        .player2 { border-left: 4px solid #4ecdc4; }

        .game-board {
            width: min(90vw, 900px);
            height: min(60vw, 600px);
            max-width: 900px;
            max-height: 600px;
            background: rgba(0,0,0,0.8);
            border: 3px solid white;
            border-radius: 10px;
            margin: 0 auto 20px auto;
            position: relative;
            overflow: hidden;
        }

        @media (max-width: 768px) {
            .game-board {
                width: 95vw;
                height: 63vw;
                max-height: 400px;
            }
        }

        .snake-segment {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 3px;
        }

        .player1-snake { background: #ff6b6b; }
        .player2-snake { background: #4ecdc4; }

        .food {
            position: absolute;
            width: 20px;
            height: 20px;
            background: #ffd93d;
            border-radius: 50%;
            box-shadow: 0 0 10px #ffd93d;
        }

        .score-board {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .score {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            display: none;
        }

        .restart-btn {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            border-radius: 25px;
            cursor: pointer;
            margin-top: 15px;
            transition: transform 0.2s;
        }

        .restart-btn:hover {
            transform: scale(1.05);
        }

        .status {
            font-size: 1.2rem;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .question-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .question-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            color: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            max-width: 400px;
            width: 90%;
        }

        .question {
            font-size: 2rem;
            margin: 20px 0;
            font-weight: bold;
            color: #ffd93d;
        }

        #answer {
            width: 200px;
            padding: 15px;
            font-size: 1.2rem;
            border: none;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
        }

        .question-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }

        .answer-btn, .skip-btn {
            padding: 12px 25px;
            font-size: 1.1rem;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .answer-btn {
            background: #4ecdc4;
            color: white;
        }

        .skip-btn {
            background: #ff6b6b;
            color: white;
        }

        .answer-btn:hover, .skip-btn:hover {
            transform: scale(1.05);
        }

        .question-timer {
            font-size: 1.2rem;
            font-weight: bold;
            color: #ffd93d;
        }

        .options-container {
            margin: 20px 0;
        }

        .option-btn {
            display: block;
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }

        .option-btn:hover {
            background: rgba(255,255,255,0.2);
            border-color: #ffd93d;
            transform: translateY(-2px);
        }

        .option-btn.selected {
            background: #4ecdc4;
            border-color: #4ecdc4;
        }

        .option-btn.correct {
            background: #4ecdc4;
            border-color: #4ecdc4;
        }

        .option-btn.incorrect {
            background: #ff6b6b;
            border-color: #ff6b6b;
        }

        .control-btn {
            width: 60px;
            height: 60px;
            background: rgba(255,255,255,0.2);
            border: 2px solid white;
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            backdrop-filter: blur(10px);
        }

        .control-btn:active {
            background: rgba(255,255,255,0.4);
            transform: scale(0.95);
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .controls-info {
                flex-direction: column;
                gap: 10px;
            }
            
            .player-info {
                font-size: 1rem;
            }
            
            .score {
                font-size: 1.3rem;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>üêç Snake Game üêç</h1>
        
        <div class="controls-info">
            <div class="player-info player1" style="margin: 0 auto; max-width: 300px;">
                <strong>Kontrol</strong><br>
                Gunakan W A S D atau ‚Üê ‚Üë ‚Üì ‚Üí untuk bergerak
            </div>
        </div>

        <div class="score-board">
            <div class="score" style="text-align: center; width: 100%;">Skor: <span id="score">0</span></div>
        </div>

        <div class="game-board" id="gameBoard">
            <div class="game-over" id="gameOver">
                <div class="status" id="gameStatus"></div>
                <button class="restart-btn" onclick="startGame()">Main Lagi</button>
            </div>
        </div>

        <div class="question-modal" id="questionModal">
            <div class="question-content">
                <h3>üîç Soal Mesin Pencari!</h3>
                <div class="question" id="question"></div>
                <div class="options-container" id="optionsContainer">
                    <!-- Options will be generated here -->
                </div>
                <div class="question-buttons">
                    <button class="skip-btn" onclick="skipQuestion()">Lewati (-5 poin)</button>
                </div>
                <div class="question-timer">Waktu: <span id="timer">15</span>s</div>
            </div>
        </div>

        <div class="mobile-controls" id="mobileControls" style="display: none; margin: 20px 0;">
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; max-width: 200px; margin: 0 auto;">
                <div></div>
                <button class="control-btn" data-direction="up">‚Üë</button>
                <div></div>
                <button class="control-btn" data-direction="left">‚Üê</button>
                <div></div>
                <button class="control-btn" data-direction="right">‚Üí</button>
                <div></div>
                <button class="control-btn" data-direction="down">‚Üì</button>
                <div></div>
            </div>
        </div>

        <div style="margin-top: 20px; font-size: 1.1rem;">
            <p>üéØ Makan makanan kuning dan jawab soal mesin pencari untuk dapat poin!</p>
            <p>‚ö†Ô∏è Jangan tabrak dinding atau diri sendiri!</p>
            <p>üîç Jawab soal dengan benar: +10 poin | Salah: -2 poin | Lewati: -5 poin</p>
        </div>
    </div>

    <script>
        const gameBoard = document.getElementById('gameBoard');
        const gameOver = document.getElementById('gameOver');
        const gameStatus = document.getElementById('gameStatus');
        const score1Element = document.getElementById('score1');
        const score2Element = document.getElementById('score2');

        let BOARD_WIDTH = 900;
        let BOARD_HEIGHT = 600;
        
        // Adjust board size for mobile
        function adjustBoardSize() {
            const gameBoard = document.getElementById('gameBoard');
            const rect = gameBoard.getBoundingClientRect();
            BOARD_WIDTH = rect.width;
            BOARD_HEIGHT = rect.height;
        }
        const SEGMENT_SIZE = 20;
        const COLS = BOARD_WIDTH / SEGMENT_SIZE;
        const ROWS = BOARD_HEIGHT / SEGMENT_SIZE;

        let gameRunning = false;
        let gameLoop;

        // Game state
        let player = {
            snake: [{x: 22, y: 15}, {x: 21, y: 15}, {x: 20, y: 15}],
            direction: {x: 1, y: 0},
            score: 0,
            color: 'player1-snake'
        };

        let food = {x: 30, y: 15};

        // Question system variables
        let currentQuestion = null;
        let questionTimer = null;
        let timeLeft = 10;
        let questionActive = false;

        // Mobile detection and controls
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth <= 768;
        
        if (isMobile) {
            document.getElementById('mobileControls').style.display = 'block';
        }

        // Touch controls for mobile
        document.querySelectorAll('.control-btn').forEach(btn => {
            btn.addEventListener('touchstart', (e) => {
                e.preventDefault();
                const direction = btn.dataset.direction;
                handleDirectionInput(direction);
            });
            
            btn.addEventListener('click', (e) => {
                e.preventDefault();
                const direction = btn.dataset.direction;
                handleDirectionInput(direction);
            });
        });

        function handleDirectionInput(direction) {
            if (!gameRunning) return;
            
            switch(direction) {
                case 'up':
                    if (player.direction.y !== 1) {
                        player.direction = {x: 0, y: -1};
                    }
                    break;
                case 'down':
                    if (player.direction.y !== -1) {
                        player.direction = {x: 0, y: 1};
                    }
                    break;
                case 'left':
                    if (player.direction.x !== 1) {
                        player.direction = {x: -1, y: 0};
                    }
                    break;
                case 'right':
                    if (player.direction.x !== -1) {
                        player.direction = {x: 1, y: 0};
                    }
                    break;
            }
        }

        // Keyboard Controls
        document.addEventListener('keydown', (e) => {
            if (!gameRunning) return;
            
            // WASD and Arrow key controls
            switch(e.key.toLowerCase()) {
                case 'w':
                case 'arrowup':
                    handleDirectionInput('up');
                    break;
                case 's':
                case 'arrowdown':
                    handleDirectionInput('down');
                    break;
                case 'a':
                case 'arrowleft':
                    handleDirectionInput('left');
                    break;
                case 'd':
                case 'arrowright':
                    handleDirectionInput('right');
                    break;
            }
            
            e.preventDefault();
        });

        function moveSnake() {
            const head = {
                x: player.snake[0].x + player.direction.x,
                y: player.snake[0].y + player.direction.y
            };

            player.snake.unshift(head);

            // Check if snake ate food
            if (head.x === food.x && head.y === food.y) {
                showQuestion();
                generateFood();
            } else {
                player.snake.pop();
            }
        }

        function checkCollisions() {
            const head = player.snake[0];
            
            // Wall collision
            if (head.x < 0 || head.x >= COLS || head.y < 0 || head.y >= ROWS) {
                return 'wall';
            }

            // Self collision
            for (let i = 1; i < player.snake.length; i++) {
                if (head.x === player.snake[i].x && head.y === player.snake[i].y) {
                    return 'self';
                }
            }

            return null;
        }

        function generateFood() {
            let validPosition = false;
            
            while (!validPosition) {
                food.x = Math.floor(Math.random() * COLS);
                food.y = Math.floor(Math.random() * ROWS);
                
                validPosition = true;
                
                // Check if food spawns on snake
                for (let segment of player.snake) {
                    if (food.x === segment.x && food.y === segment.y) {
                        validPosition = false;
                        break;
                    }
                }
            }
        }

        function render() {
            // Clear all snake segments and food, but keep game over element
            const existingGameOver = gameBoard.querySelector('.game-over');
            gameBoard.innerHTML = '';
            if (existingGameOver) {
                gameBoard.appendChild(existingGameOver);
            }

            // Render snake
            for (let segment of player.snake) {
                const segmentElement = document.createElement('div');
                segmentElement.className = 'snake-segment player1-snake';
                segmentElement.style.left = segment.x * SEGMENT_SIZE + 'px';
                segmentElement.style.top = segment.y * SEGMENT_SIZE + 'px';
                gameBoard.appendChild(segmentElement);
            }

            // Render food
            const foodElement = document.createElement('div');
            foodElement.className = 'food';
            foodElement.style.left = food.x * SEGMENT_SIZE + 'px';
            foodElement.style.top = food.y * SEGMENT_SIZE + 'px';
            gameBoard.appendChild(foodElement);

            // Update score
            document.getElementById('score').textContent = player.score;
        }

        function gameStep() {
            if (!gameRunning) return;

            moveSnake();

            const collision = checkCollisions();
            if (collision) {
                endGame(collision);
                return;
            }

            render();
        }

        function endGame(reason) {
            gameRunning = false;
            clearInterval(gameLoop);

            let message = '';
            if (reason === 'wall') {
                message = 'üí• Game Over! üí•<br>Kamu menabrak dinding!';
            } else if (reason === 'self') {
                message = 'üêç Game Over! üêç<br>Kamu menabrak diri sendiri!';
            }

            message += `<br><br>Skor Akhir: ${player.score}`;

            gameStatus.innerHTML = message;
            gameOver.style.display = 'block';
        }

        function generateQuestion() {
            const questions = [
                {
                    question: "Jenis mesin pencari yang cara kerjanya adalah mengindeks web secara otomatis untuk menemukan hasil paling relevan adalah...",
                    options: ["Web Directory", "Search Engine", "Meta-Search Engine", "Browser"],
                    correct: 1
                },
                {
                    question: "Apa perbedaan utama dari Web Directory dibandingkan dengan Search Engine?",
                    options: [
                        "Mengindeks hasil paling relevan secara real-time.",
                        "Hanya menampilkan hasil yang berbayar (iklan).",
                        "Daftar situs dikelompokkan manual berdasarkan kategori.",
                        "Menggabungkan hasil dari tiga mesin pencari sekaligus."
                    ],
                    correct: 2
                },
                {
                    question: "Apa keuntungan menggunakan Meta-Search Engine?",
                    options: [
                        "Menghasilkan lebih banyak hasil yang sama.",
                        "Menggabungkan hasil dari beberapa mesin pencari sekaligus.",
                        "Mengecualikan kata tertentu dari hasil pencarian.",
                        "Hanya mencari situs yang memiliki domain .edu."
                    ],
                    correct: 1
                },
                {
                    question: "Mengapa Web Directory dianggap kurang relevan saat ini dibandingkan Search Engine?",
                    options: [
                        "Karena Web Directory mengenakan biaya pada pengguna.",
                        "Karena proses pengelompokannya manual dan lambat mengikuti perkembangan web.",
                        "Karena hanya bisa diakses menggunakan smartphone.",
                        "Karena tidak bisa menampilkan gambar atau video."
                    ],
                    correct: 1
                },
                {
                    question: "Kata kunci umum seperti 'sepatu' cenderung menghasilkan...",
                    options: [
                        "Jumlah hasil sedikit dengan tingkat relevansi yang tinggi.",
                        "Jumlah hasil banyak dengan tingkat relevansi yang bervariasi.",
                        "Hasil yang hanya terkait dengan penjualan dan e-commerce.",
                        "Hasil yang dikelompokkan secara manual oleh manusia."
                    ],
                    correct: 1
                },
                {
                    question: "Apa manfaat utama menggunakan kata kunci spesifik (long-tail) seperti 'review sepatu lari pria ukuran 42'?",
                    options: [
                        "Menghasilkan volume hasil pencarian yang maksimal.",
                        "Memperoleh hasil yang relevan dan akurat sesuai kebutuhan.",
                        "Mengaktifkan mode pencarian Meta-Search Engine secara otomatis.",
                        "Mengecualikan semua hasil yang berasal dari media sosial."
                    ],
                    correct: 1
                },
                {
                    question: "Dalam perbandingan efektivitas, Kata Kunci Spesifik memiliki tingkat relevansi yang tinggi, sedangkan Kata Kunci Umum memiliki tingkat...",
                    options: [
                        "Relevansi yang sangat rendah.",
                        "Jumlah hasil yang sedikit.",
                        "Relevansi yang bervariasi, namun Jumlah Hasil yang Tinggi.",
                        "Penggunaan operator pencarian wajib."
                    ],
                    correct: 2
                },
                {
                    question: "Jika Anda mencari frasa yang harus sama persis, operator pencarian yang tepat untuk digunakan adalah...",
                    options: [
                        "site:indonesia.go.id",
                        "INURL:",
                        '"Frasa Persis"',
                        "OR"
                    ],
                    correct: 2
                },
                {
                    question: "Untuk mengecualikan kata tertentu dari hasil pencarian Anda (misalnya: mencari browser, tetapi tidak ingin melihat hasil tentang Chrome), operator mana yang harus Anda tambahkan?",
                    options: [
                        "Kata yang diawali tanda plus (+)",
                        "Tanda kurung siku ([])",
                        "Kata yang diawali tanda minus (-)",
                        "Tanda bintang (*)"
                    ],
                    correct: 2
                },
                {
                    question: "Anda ingin mencari informasi tentang 'Python' atau 'Javascript'. Operator Logika yang paling sesuai adalah...",
                    options: [
                        "PYTHON AND JAVASCRIPT",
                        "PYTHON OR JAVASCRIPT",
                        "PYTHON -JAVASCRIPT",
                        '"PYTHON JAVASCRIPT"'
                    ],
                    correct: 1
                },
                {
                    question: "Operator 'AND' digunakan untuk mencari...",
                    options: [
                        "Dua kata kunci atau lebih yang salah satunya ada di hasil.",
                        "Dua kata kunci atau lebih yang semuanya harus ada di hasil.",
                        "Hanya situs yang dikelompokkan dalam Web Directory.",
                        "Frasa yang sama persis dalam urutan yang tepat."
                    ],
                    correct: 1
                }
            ];
            
            const randomIndex = Math.floor(Math.random() * questions.length);
            return questions[randomIndex];
        }

        function showQuestion() {
            if (questionActive) return;
            
            gameRunning = false;
            questionActive = true;
            currentQuestion = generateQuestion();
            timeLeft = 15;
            
            document.getElementById('question').textContent = currentQuestion.question;
            document.getElementById('timer').textContent = timeLeft;
            
            // Generate options
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            currentQuestion.options.forEach((option, index) => {
                const optionBtn = document.createElement('button');
                optionBtn.className = 'option-btn';
                optionBtn.textContent = `${String.fromCharCode(65 + index)}. ${option}`;
                optionBtn.onclick = () => selectOption(index);
                optionsContainer.appendChild(optionBtn);
            });
            
            document.getElementById('questionModal').style.display = 'flex';
            
            // Start timer
            questionTimer = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    timeUp();
                }
            }, 1000);
        }

        function selectOption(selectedIndex) {
            // Disable all options
            const options = document.querySelectorAll('.option-btn');
            options.forEach(btn => btn.style.pointerEvents = 'none');
            
            // Show correct/incorrect
            options.forEach((btn, index) => {
                if (index === currentQuestion.correct) {
                    btn.classList.add('correct');
                } else if (index === selectedIndex && index !== currentQuestion.correct) {
                    btn.classList.add('incorrect');
                }
            });
            
            // Update score and show feedback
            if (selectedIndex === currentQuestion.correct) {
                player.score += 10;
                showFeedback('‚úÖ Benar! +10 poin', '#4ecdc4');
            } else {
                player.score = Math.max(0, player.score - 2);
                const correctAnswer = currentQuestion.options[currentQuestion.correct];
                showFeedback(`‚ùå Salah! Jawaban: ${correctAnswer} (-2 poin)`, '#ff6b6b');
            }
            
            // Close question after delay
            setTimeout(() => {
                closeQuestion();
            }, 2000);
        }

        function skipQuestion() {
            player.score = Math.max(0, player.score - 5);
            showFeedback('‚è≠Ô∏è Dilewati! -5 poin', '#ffa500');
            closeQuestion();
        }

        function timeUp() {
            // Disable all options
            const options = document.querySelectorAll('.option-btn');
            options.forEach(btn => btn.style.pointerEvents = 'none');
            
            // Show correct answer
            options.forEach((btn, index) => {
                if (index === currentQuestion.correct) {
                    btn.classList.add('correct');
                }
            });
            
            player.score = Math.max(0, player.score - 3);
            const correctAnswer = currentQuestion.options[currentQuestion.correct];
            showFeedback(`‚è∞ Waktu habis! Jawaban: ${correctAnswer} (-3 poin)`, '#ff6b6b');
            
            setTimeout(() => {
                closeQuestion();
            }, 2000);
        }

        function showFeedback(message, color) {
            const feedback = document.createElement('div');
            feedback.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: ${color};
                color: white;
                padding: 20px 30px;
                border-radius: 10px;
                font-size: 1.2rem;
                font-weight: bold;
                z-index: 2000;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            `;
            feedback.textContent = message;
            document.body.appendChild(feedback);
            
            setTimeout(() => {
                document.body.removeChild(feedback);
            }, 2000);
        }

        function closeQuestion() {
            clearInterval(questionTimer);
            questionActive = false;
            document.getElementById('questionModal').style.display = 'none';
            gameRunning = true;
            render();
        }

        // Multiple choice questions don't need Enter key support

        function startGame() {
            // Adjust board size for current screen
            adjustBoardSize();
            
            const COLS = Math.floor(BOARD_WIDTH / SEGMENT_SIZE);
            const ROWS = Math.floor(BOARD_HEIGHT / SEGMENT_SIZE);
            
            // Reset game state with adjusted positions
            player = {
                snake: [{x: Math.floor(COLS/2), y: Math.floor(ROWS/2)}, 
                        {x: Math.floor(COLS/2)-1, y: Math.floor(ROWS/2)}, 
                        {x: Math.floor(COLS/2)-2, y: Math.floor(ROWS/2)}],
                direction: {x: 1, y: 0},
                score: 0,
                color: 'player1-snake'
            };

            // Reset question system
            questionActive = false;
            clearInterval(questionTimer);
            document.getElementById('questionModal').style.display = 'none';

            generateFood();
            gameRunning = true;
            gameOver.style.display = 'none';

            render();
            gameLoop = setInterval(gameStep, 150);
        }

        // Start the game when page loads
        startGame();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98dc26dc3435fdc5',t:'MTc2MDMzMDM1Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
